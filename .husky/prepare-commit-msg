if [ -z "$HUSKY_COMMIT_JIRA_TICKET" ] || [ "$HUSKY_COMMIT_JIRA_TICKET" -eq "0" ]; then
  exit 0
fi

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2

TYPES=("message")

if [[ ${TYPES[@]} =~ $COMMIT_SOURCE ]] || [[ -z "$COMMIT_SOURCE" ]]; then
  ref=$(git rev-parse --abbrev-ref HEAD)
  if [[ $ref =~ ([A-Z][A-Z0-9]+-[0-9]+) ]]; then
    msg=$(cat "$COMMIT_MSG_FILE")
    ticket="${BASH_REMATCH[1]}"
    echo "[${ticket}] $msg" > "$COMMIT_MSG_FILE"
    echo "[${ticket}] added to commit message"
  fi
fi